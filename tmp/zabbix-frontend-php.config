#!/bin/sh
. /usr/share/debconf/confmodule
db_version 2.0 || [ $? -lt 30 ]

db_input medium zabbix-frontend-php/database-type || true
db_go || true
db_input medium zabbix-frontend-php/database-server || true
db_go || true

if [ ! -e /etc/dbconfig-common/zabbix-server-mysql.conf ] &&
   [ ! -e /etc/dbconfig-common/zabbix-server-pgsql.conf ]; then
	db_input medium zabbix-frontend-php/database-name || true
	db_go || true
fi

if [ ! -e /etc/dbconfig-common/zabbix-server-mysql.conf ] &&
   [ ! -e /etc/dbconfig-common/zabbix-server-pgsql.conf ]; then
	db_input medium zabbix-frontend-php/database-user || true
	db_go || true
fi

if [ ! -e /etc/dbconfig-common/zabbix-server-mysql.conf ] &&
   [ ! -e /etc/dbconfig-common/zabbix-server-pgsql.conf ]; then
	db_input medium zabbix-frontend-php/database-password || true
	db_go || true
fi

db_input medium zabbix-frontend-php/reconfigure-webserver || true
db_go || true
db_input medium zabbix-frontend-php/restart-webserver || true
db_go || true

#DEBHELPER#

exit 0
